var XT={};!function($){"use strict";XT.vars={breakpoints:{mobile:480,tablet:782},bodyNiceScroll:null,menuNiceScroll:null,animating:!1,animationEnd:"transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"},XT.init=function(){XT.initClasses(),XT.initFoundation(),XT.initContentHeight(),XT.initBodyNiceScroll(),XT.initTopMenu(),XT.initSmoothScroll(),XT.initMainSearch(),XT.initMobileSearch(),XT.initDropAnimations(),XT.initAnimations(),XT.initOffCanvasMenu(),XT.initCategoryPostsMenu(),XT.initToggle(),XT.initInputs(),XT.initPagination(),XT.initStickySidebar(),XT.initPostNav(),XT.initTwitter(),XT.initComments(),XT.initStackView(),XT.initOrbit(),XT.initEndlessArticles(),XT.initStollJs(),XT.initChosenSelect(),XT.initLabelToPlaceholder(),XT.initBackToTop(),XT.initScrollToSection(),XT.initParallax(),XT.initBgVideos(),XT.hideWidgetTitleIfEmpty(),XT.initWoocommerce(),XT.initCustomJS(),$(window).load(function(){$(this).resize(),$(this).scroll()})},XT.initClasses=function(){$(".page-header").length>0&&$("body").addClass("has-page-header"),(XT.isTouch()||!XT.canDoAnimations())&&$(".wpb_animate_when_almost_visible").removeClass("wpb_animate_when_almost_visible")},XT.initFoundation=function(){$(document).foundation(),$("html").hasClass("no-flexbox")&&$("html").removeClass("flexbox");var a=document.documentElement;a.setAttribute("data-useragent",navigator.userAgent)},XT.initBodyNiceScroll=function(){return $(window).on("scroll mousedown DOMMouseScroll mousewheel keyup",function(a){XT.vars.animating&&a.preventDefault()}),XT.isTouch()||!xt_vars.enable_nice_scroll?!1:(XT.vars.bodyNiceScroll=$("body").niceScroll({cursorborderradius:"3px",railpadding:{top:0,right:1,left:0,bottom:0},cursorborder:"rgba(255,255,255, 0.7)",cursoropacitymax:.8,scrollspeed:60,mousescrollstep:60}),void XT.initSmoothScroll(!0))},XT.initTopMenu=function(){var a=$("body").css("background-color"),b=$(".top-menu .top-bar .top-bar-section").css("background-color"),c=$(".top-menu").hasClass("sticky");$(".toggle-topbar.menu-icon").off("click"),$(".toggle-topbar.menu-icon").on("click",function(){setTimeout(function(){XT.isMobileMenuOpen()?(c&&$(".top-menu").removeClass("sticky"),$(".hide-on-mobile-menu").fadeOut(),$("body").css("background-color",b)):(c&&$(".top-menu").addClass("sticky"),$(".hide-on-mobile-menu").fadeIn("fast"),$("body").css("background-color",a))},50),setTimeout(function(){XT.initSmoothScroll(!0)},500)}),$(window).on("resize",function(){$(this).width()>XT.vars.breakpoints.tablet&&($("#inner_wrapper").is(":visible")||$("#inner_wrapper").fadeIn())})},XT.initSmoothScroll=function(a,b){if($(".enable_smooth_scroll").length>0&&(xt_vars.enable_smooth_scroll=!0),XT.isTouch()||!xt_vars.enable_smooth_scroll)return!1;if(0===$(".gambit_parallax_enable_smooth_scroll").length){"undefined"==typeof $.easing.easeOutQuint&&$.extend(jQuery.easing,{easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c}});var c=!1,d=$(document).height()-$(window).height(),e=$(window).scrollTop(),f=function(){c===!1&&(e=$(this).scrollTop())},g=function(a,b){return b=b||-a.originalEvent.detail/3||a.originalEvent.wheelDelta/120,c=!0,e=Math.min(d,Math.max(0,parseInt(e-120*b))),$(-1!==navigator.userAgent.indexOf("AppleWebKit")?"body":"html").stop().animate({scrollTop:e+"px"},1600,"easeOutQuint",function(){c=!1}),!1},h=function(){XT.initSmoothScroll(!0)},i=function(){setTimeout(function(){XT.initSmoothScroll(!0)},1e3)};if($(window).off("scroll",f),$(document).off("DOMMouseScroll mousewheel"),b)return!1;if($(window).on("scroll",f),$(document).on("DOMMouseScroll mousewheel",g),a)return;$(document).ajaxComplete(function(){setTimeout(function(){XT.initSmoothScroll(!0)},500)}),$(window).off("resize",h),$(window).on("resize",h),$(window).off("load",i),$(window).on("load",i)}},XT.initParallax=function(){$(".vc_row.has-parallax").each(function(){var a=$(this).css("background-image");a&&""!==a&&"none"!==a&&XT.isTouch()&&$(this).css({"background-attachment":"scroll"})}),setTimeout(function(){$(".vc_row.has-parallax").parallax("50%",.15,!0),$(".vc_row.has-parallax,.vc_row.has-overlay").addClass("loaded")},10)},XT.initBgVideos=function(){setTimeout(function(){$(".vc_row.has-video").each(function(){function a(){var c=b.find(".row-video");if(4===$(c).get(0).readyState){var d=b.outerHeight(!0);c=b.find("video.row-video");var e=c.data("position"),f=c.outerHeight(!0),g=0;"bottom"===e?g=f>d?f-d:d-f:"middle"===e&&(g=f>d?(f-d)/2:(d-f)/2),c.css("margin-top",-g),b.addClass("loaded")}else setTimeout(a,100)}var b=$(this);a()})},800)},XT.isMobileMenuOpen=function(){return $(".top-menu .top-bar").hasClass("expanded")},XT.initOffCanvasMenu=function(){function a(){function a(){c(),d(),e(),f(),q=!0,setTimeout(function(){$(k).removeClass("closed opening").addClass("opened")},50)}q?b():(XT.vars.bodyNiceScroll?XT.vars.bodyNiceScroll.hide():$("body").css("overflow","hidden"),XT.initSmoothScroll(!1,!0),$(k).removeClass("closing closed").addClass("opening"),d(),e(),f(),XT.canDoAnimations()?$(j).one(XT.vars.animationEnd,a):a())}function b(){function a(){g(),h(),i(),XT.vars.bodyNiceScroll&&XT.vars.bodyNiceScroll.show(),XT.initSmoothScroll(!0),q=!1,setTimeout(function(){$(k).removeClass("opened closing").addClass("closed")},50)}$("body").css("overflow",""),$(k).removeClass("opening opened").addClass("closing"),XT.canDoAnimations()?$(j).one(XT.vars.animationEnd,a):a()}function c(){$(o).find("i").removeClass("fa-bars").addClass("fa-times")}function d(){$(l).css("top",$(window).scrollTop())}function e(){$(m).length>0&&$(m).css("top",$(window).scrollTop())}function f(){if($(n).length>0){var a=$(window).scrollTop();$(m).length>0&&(a+=$(m).height()),$(n).css("top",a)}}function g(){$(o).find("i").removeClass("fa-times").addClass("fa-bars")}function h(){$(m).length>0&&$(m).removeAttr("style")}function i(){if($(n).length>0)if($(m).length>0){var a=$(m).css("top").replace("px","")+$(m).height();$(n).css("top",a)}else $(n).removeAttr("style")}var j="#wrapper",k=".off-canvas-wrap",l=".off-canvas-menu",m=".top-menu.sticky.fixed",n=".main-menu.sticky.fixed",o=".toggle-sidebar a",p=".exit-off-canvas",q=!1;d(),e(),f(),$(o).off("click",a),$(o).on("click",a),$(p).off("click",b),$(p).on("click",b),$(l+" .dropdown").each(function(){var a=$(this),b=a.prev().html();a.prepend('<li class="has_label"><label>'+b+"</label></li>")})},XT.initCategoryPostsMenu=function(){$(".category_posts_sub_menu").each(function(){$(this).addClass("animate-drop slide-top"),$(this).detach().prependTo("#main-header")});var a,b=50,c=!1;$(".menu-item.has-category-dropdown").on("mouseenter",function(){a&&clearTimeout(a);var d=$(this).data("objectid");$("#category_posts_sub_menu_"+d).off("mouseenter"),$("#category_posts_sub_menu_"+d).on("mouseenter",function(){$(this).addClass("open").removeClass("close"),$("body").addClass("lights-off"),c=!0}),a=setTimeout(function(){$(".category_posts_sub_menu").removeClass("open").addClass("close"),$("#category_posts_sub_menu_"+d).removeClass("close").addClass("open"),$("body").addClass("lights-off")},b)}),$(".menu-item.has-category-dropdown").on("mouseleave",function(){a&&clearTimeout(a);var d=$(this).data("objectid");a=setTimeout(function(){return c?!1:($("#category_posts_sub_menu_"+d).removeClass("open").addClass("close"),$("body").removeClass("lights-off"),void $("#category_posts_sub_menu_"+d).off("mouseenter"))},b),$("#category_posts_sub_menu_"+d).off("mouseleave"),$("#category_posts_sub_menu_"+d).on("mouseleave",function(){var a=$(this);a.removeClass("open"),setTimeout(function(){a.addClass("close")},300),$("body").removeClass("lights-off"),$("#category_posts_sub_menu_"+d).off("mouseenter"),c=!1})}),$(".category_submenu_post a").off("click")},XT.initMainSearch=function(){var a=!1;$(".main-menu ul.search .search-button").on("click",function(){var b=$(this).parent().find(".search-input");if(""!==b.val()||a||b.hasClass("autotyping"))""===b.val()?b.focus():$(this).closest("form").submit();else{var c=b.attr("placeholder");b.addClass("autotyping"),b.autotype(c,{delay:80}).bind("autotyped",function(){setTimeout(function(){b.val("").focus(),a=!0,b.removeClass("autotyping")},50)})}}),$(".main-menu ul.search .search-close-button").on("click",function(a){a.preventDefault();var b=$(this).parent().find(".search-input");b.val("").blur()}),$(".main-menu ul.search .search-input").on("keypress change blur",function(){var a=$(this),b=a.closest("ul.search");setTimeout(function(){var c=a.val();""!==c?(b.addClass("is-searching"),$("body").addClass("is-searching")):(b.addClass("is-closing"),setTimeout(function(){b.removeClass("is-searching is-closing"),$("body").removeClass("is-searching is-closing")},1))},10)}).trigger("keypress"),$(".main-menu ul.search .search-input").on("focus",function(){var a=$(this).closest("ul.search");a.addClass("is-searching"),$("body").addClass("is-searching")}),$(".main-menu ul.search form").on("submit",function(a){var b=$(this).find(".search-input"),c=b.val();(""===c||b.hasClass("autotyping"))&&(a.preventDefault(),b.focus())}),$(".top-menu .menu-search > a").on("click",function(a){return a.preventDefault(),$(".main-menu").hasClass("sticky fixed")?($(".main-menu ul.search a.search-button").trigger("click"),!1):void $("html,body").animate({scrollTop:0},700,function(){$(".main-menu ul.search a.search-button").trigger("click")})})},XT.initMobileSearch=function(){var a=$(".search.show-for-small-only");if(a.length>0){var b=a.find(".search-input"),c=a.find(".search-button"),d=a.find(".search-close-button");c.on("click",function(a){b.closest(".has-form").hasClass("open")?c.closest("form").submit():(a.preventDefault(),a.stopPropagation(),c.parent().removeClass("small-centered"),c.closest(".has-form").addClass("open"),b.focus())}),b.on("blur",function(){""===$(this).val()&&$(this).closest(".has-form").removeClass("open")}),d.on("click",function(a){a.preventDefault(),b.val("").blur()})}},XT.initDropAnimations=function(){var a;$(".animate-drop").each(function(){$(this).closest(".has-dropdown").on("mouseover",function(){$(".animate-drop").closest(".has-dropdown").not($(this)).addClass("close").removeClass("open active"),clearTimeout(a),$(this).removeClass("close").addClass("open active")}),$(this).closest(".has-dropdown").on("mouseleave",function(){var b=$(this);a=setTimeout(function(){b.addClass("close"),b.removeClass("open active")},300)})})},XT.initAnimations=function(){$(".animated").each(function(){var a=$(this),b=a.data("animation");a.removeClass("hidden-for-small-up"),a.addClass(b)})},XT.initToggle=function(){$("a.toggle,button.toggle").off("click"),$("a.toggle,button.toggle").on("click",function(){var a=$(this),b=a.data("toggle"),c=a.data("callback");if($(b).hasClass("in"))$(b).hide().removeClass("in");else if($(b).addClass("in").show(),c){c=c.split(",");for(var d=0;d<c.length;d++){var e=XT[c[d]];"function"==typeof e&&e(a,b)}}})},XT.initInputs=function(a){$(".has-prefix").each(function(){var a=$(this);a.on("focus",function(){$(this).closest(".prefix-wrap").addClass("focused")}),a.on("blur",function(){$(this).closest(".prefix-wrap").removeClass("focused")})}),$(".has-postfix").each(function(){var a=$(this);a.on("focus",function(){$(this).closest(".postfix-wrap").addClass("focused")}),a.on("blur",function(){$(this).closest(".postfix-wrap").removeClass("focused")})}),$('input[type="file"]').each(function(){$(this).on("change",function(){var a=$(this).val(),b='<span style="display:block;margin-bottom:10px;" class="file-input-value">'+a+"</span>";$(this).parent().find(".file-input-value").remove(),$(this).parent().append(b)})}),a||$(document).ajaxComplete(function(){XT.initInputs(!0)})},XT.initWoocommerce=function(){function a(){$("div.quantity:not(.buttons_added), td.quantity:not(.buttons_added)").each(function(){$(this).addClass("buttons_added").append('<input type="button" value="+" class="plus" />').prepend('<input type="button" value="-" class="minus" />')}),$("input.qty:not(.product-quantity input.qty)").each(function(){var a=parseFloat($(this).attr("min"));a&&a>0&&parseFloat($(this).val())<a&&$(this).val(a)}),$(document).off("click",".plus, .minus"),$(document).on("click",".plus, .minus",function(){var a=$(this).closest(".quantity").find(".qty"),b=parseFloat(a.val()),c=parseFloat(a.attr("max")),d=parseFloat(a.attr("min")),e=a.attr("step");b&&""!==b&&"NaN"!==b||(b=0),(""===c||"NaN"===c)&&(c=""),(""===d||"NaN"===d)&&(d=0),("any"===e||""===e||void 0===e||"NaN"===parseFloat(e))&&(e=1),$(this).is(".plus")?a.val(c&&(c===b||b>c)?c:b+parseFloat(e)):d&&(d===b||d>b)?a.val(d):b>0&&a.val(b-parseFloat(e)),a.trigger("change");var f=$(this).closest("form"),g=f.serialize();$(".mini-cart").addClass("loading"),$.ajax({url:xt_vars.ajaxurl,data:g,type:"post",success:function(){$.ajax($fragment_refresh)}})})}function b(){$("ul.products li.has-gallery a:first-child").each(function(){$(this).hover(function(){$(this).children(".wp-post-image").removeClass("fadeInDown").addClass("animated fadeOutUp"),$(this).children(".secondary-image").removeClass("fadeOutUp").addClass("animated fadeInDown")},function(){$(this).children(".wp-post-image").removeClass("fadeOutUp").addClass("fadeInDown"),$(this).children(".secondary-image").removeClass("fadeInDown").addClass("fadeOutUp")})})}a(),b(),$(document).ajaxComplete(function(){a(),b()})},XT.initPagination=function(){XT.XHR={settings:{url:xt_vars.ajaxurl,type:"POST"}},XT.pagination={XHR:{},$:{},loadingClass:"ajax-load",loadedClass:"ajax-loaded",ajaxBusy:!1,isotope:!1},XT.pagination.XHR={done:function(a,b,c){var d=XT.pagination;if(a){if(d.isotope){var e=$(a);d.$.container.append(e).isotope("addItems",e).isotope("reLayout"),d.$.container.fadeIn()}else d.$.container.append(a).fadeIn();var f=d.$.container.find(".button-more");d.$.waiting=$(".wait"),f.length>0?(d.$.loadButton.replaceWith(f[0].outerHTML),f.remove(),d.$.loadButton=$(".button-more")):(d.$.loadButton.parent().remove(),d.$.waiting&&d.$.waiting.remove()),d.ajaxBusy=!1;var g=d.$.loadButton.data("callback");if(g){g=g.split(",");for(var h=0;h<g.length;h++){var i=XT[g[h]];"function"==typeof i&&i()}}"paginate_scroll"===d.method?$(window).on("scroll",function(){if(!d.ajaxBusy){var a=$(this),b=$(document),c=$("body footer");a.scrollTop()>=b.height()-a.height()-c.height()&&d.$.loadButton.click()}}):d.$.loadButton.css("visibility","visible").fadeIn(),XT.updatePageInfo("",XT.XHR.settings.url),XT.initAjaxBlocksLoadEvent()}else d.$.loadButton.parent().remove(),d.$.waiting&&d.$.waiting.remove(),d.XHR.fail(c,"error","")},fail:function(a,b,c){var d=XT.pagination;setTimeout(function(){d.$.container.append(c).fadeIn()},100)},always:function(){var a=XT.pagination;a.$.loadButton.prop("disabled",!1),a.$.container.removeClass(a.loadingClass),a.$.container.addClass(a.loadedClass),XT.vars.bodyNiceScroll&&xt_vars.enable_nice_scroll&&!XT.isTouch()&&XT.vars.bodyNiceScroll.resize()},before:function(){var a=XT.pagination;a.$.container.addClass(a.loadingClass),a.$.container.removeClass(a.loadedClass),a.$.loadButton.prop("disabled",!0)}},XT.initAjaxBlocksLoad()},XT.initAjaxBlocksLoad=function(){XT.pagination.XHR.request={dataType:"text",data:{ajax:1},beforeSend:XT.pagination.XHR.before},XT.pagination.XHR.request=$.extend(!0,XT.pagination.XHR.request,XT.XHR.settings),XT.initAjaxBlocksLoadEvent(),$("a.button-more").trigger("click")},XT.initAjaxBlocksLoadEvent=function(){$(document).off("click","a.button-more"),$(document).on("click","a.button-more",function(a){a.preventDefault();var b=XT.pagination,c=$(this);b.isotope=$(".isotope-wrap").length>0,b.ajaxBusy||(b.$.loadButton=c,b.$.container=$("#"+b.$.loadButton.data("rel")),XT.pagination.XHR.request.url=b.$.loadButton.attr("href"),XT.XHR.settings.url=b.$.loadButton.attr("href"),b.method=c.data("paginate"),$.ajax(b.XHR.request).done(b.XHR.done).fail(b.XHR.fail).always(b.XHR.always))})},XT.initStackView=function(){$(".stack").each(function(){function a(){1===k?h.attr("disabled",!0):h.attr("disabled",!1),k===g.length?i.attr("disabled",!0):i.attr("disabled",!1)}function b(){c=g.filter(":nth-child("+k+")"),c.addClass("visible"),f.css("height",c.outerHeight()),d.addClass("loaded")}var c,d=$(this),e=d.find(".stack_view"),f=e.find(".stack_wrap"),g=f.find("li"),h=d.find(".controls .prev"),i=d.find(".controls .next"),j=g.length,k=1;g.each(function(){this.style["z-index"]=j,$(this).removeClass("visible"),j--}),i.bind("click",function(b){return b.preventDefault(),$(this).attr("disabled")?!1:(g.removeClass("visible"),c=g.filter(":nth-child("+(k+1)+")"),c.addClass("visible"),f.css("height",c.outerHeight()),k++,void a())}),h.bind("click",function(b){return b.preventDefault(),$(this).attr("disabled")?!1:(g.removeClass("visible"),c=g.filter(":nth-child("+(k-1)+")"),c.addClass("visible"),f.css("height",c.outerHeight()),k--,void a())}),setTimeout(b,100),$(window).on("load",b)})},XT.initOrbit=function(){function a(){$(".orbit-wrap").each(function(){$(this).addClass("loaded"),$(this).find(".orbit-caption").addClass("gradient-wrap")})}setTimeout(a,100),$(window).on("load",a)},XT.initEndlessArticles=function(){function a(){$(window).off("resize"),$(window).on("resize",function(){var a=$(window).width();u=$(this).height()-$("header").height();var b=p.parent().width();p.height(u),p.width(b),s.height(u),a>XT.vars.breakpoints.tablet?s.find(".endless-articles").parent().css("margin-left",b+45):s.find(".endless-articles").parent().css("margin-left","inherit"),q.each(function(){var a=$(this).getNiceScroll();a.resize(),$(this).height(u-v)}),A.resize()}),$(window).resize()}function b(){$(".tpl-endless-articles .sidebar .tabs").off("toggled"),$(".tpl-endless-articles .sidebar .tabs").on("toggled",function(a,b){setTimeout(function(){r=g(),$(b).find(".news-list").getNiceScroll().resize(),$(b).find(".news-list li").removeClass("past"),setTimeout(function(){$(b).find(".news-list li").removeClass("past")},100);var a=$(b).attr("id");$(".tabs-fullcontent").removeClass("active"),a="#"+a+"-tabs-fullcontent",$(a).addClass("active"),r.find("li.active a").data("force",1).click().removeData("force"),d(),e()},20)})}function c(){q.find("li a").off("click"),q.find("li a").on("click",function(a){a.preventDefault(),r=g(),t=h();var b=$(this),c=b.data("force"),d=b.data("skipstate"),e=b.data("postid");r.find("li").removeClass("active"),b.parent().addClass("active");var f=b.parent().index(),i=t.data("active");if(i!==f||1===c){t.data("active",f);var j=t.find("article").eq(f);if(j){var k=j.data("postid");if(e!==k)return location.href=b.attr("href"),!1}for(var l=0,n=0;f>n;n++){var o=t.find("article").eq(n);l+=o.outerHeight()}1===c?(s.scrollTop(l),1!==d&&m&&XT.updatePageInfo(b.text(),b.attr("href"),"")):(XT.vars.animating=!0,s.animate({scrollTop:l+"px"},700,function(){setTimeout(function(){XT.vars.animating=!1,1!==d&&m&&XT.updatePageInfo(b.text(),b.attr("href"),"")},100)}))}})}function d(){var a=0,b=0,c="",d="",e=30;r=g(),r.off("scroll"),r.on("scroll",function(){var b=$(this).scrollTop();c=b>a?"down":"up",a=b,$(this).scrollTop()+$(this).innerHeight()>=this.scrollHeight&&k("nav","prev")}),s.off("scroll"),s.on("scroll",function(a){XT.vars.animating&&a.preventDefault();var c=$(this).scrollTop();d=c>b?"down":"up",b=c,$(this).scrollTop()+$(this).innerHeight()>=this.scrollHeight?k("content","prev"):"up"===d&&0===$(this).scrollTop()}),r.off("mousewheel"),r.on("mousewheel",function(a){a.originalEvent.wheelDelta>e&&0===$(this).scrollTop()||a.originalEvent.wheelDelta<e&&$(this).scrollTop()+$(this).innerHeight()>=this.scrollHeight&&k("nav","prev")}),s.off("mousewheel"),s.on("mousewheel",function(a){XT.vars.animating&&a.preventDefault(),a.originalEvent.wheelDelta>e&&0===$(this).scrollTop()||a.originalEvent.wheelDelta<e&&$(this).scrollTop()+$(this).innerHeight()>=this.scrollHeight&&k("content","prev")})}function e(){r=g(),t=h(),t.find("article").off(),t.find("article").on("inview",function(a,b,c,d){if(b&&"bottom"===d){var e=$(this).data("postid"),f=r.find('[data-postid="'+e+'"]').parent();if(!$(f).hasClass("active")&&!XT.vars.animating){XT.vars.animating=!0,r.find("li").removeClass("active"),$(f).addClass("active");for(var g=$(f).index(),h=0,i=0;g>i;i++){var j=r.find("li").eq(i);h+=j.outerHeight()}r.animate({scrollTop:h+"px"},700,function(){XT.vars.animating=!1;var a=$(f).find("a");m&&XT.updatePageInfo(a.text(),a.attr("href"),"")})}}})}function f(){$("#endless-articles-wrapper").addClass("loaded"),t=h(),r=g(),q.each(function(){$(this).find("li").first().addClass("active")}),o&&($("body.admin-bar.admin-bar-bottom").css({"margin-top":0,"padding-bottom":0}),t.find(n).find(".comments-toggle").trigger("click"),XT.vars.animating=!1);var a="state"in window.history,b=location.href;$(window).on("popstate",function(c){var d=!a&&location.href===b;if(a=!0,!d){{c.originalEvent.state}r=g();var e=r.find("[href='"+location.href+"']");e.length>0&&e.data("skipstate",1).trigger("click").removeData("skipstate")}})}function g(){return $(".tpl-endless-articles .sidebar .tabs-content .content.active .news-list")}function h(){return s.find(".tabs-fullcontent.active")}function i(a,b){w=!0,r=g(),t=h();var c='<div class="wait mini">';c+='<div class="double-bounce1"></div>',c+='<div class="double-bounce2"></div>',c+="</div>";var d='<li class="loading ajax-load">'+c+"</li>",e='<article class="loading ajax-load">'+c+"</article>";"prev"===b?(r.append(d),t.append(e)):(r.prepend(d),t.prepend(e)),r.addClass("loading"),t.addClass("loading");var f;"nav"===a?(f=r[0].scrollHeight,"next"===b&&(f=0),XT.vars.animating=!0,r.animate({scrollTop:f},700,function(){XT.vars.animating=!1})):"content"===a&&(f=s[0].scrollHeight,"next"===b&&(f=0),XT.vars.animating=!0,s.animate({scrollTop:f},700,function(){XT.vars.animating=!1}))}function j(a){r=g(),t=h(),XT.vars.animating=!0;var b=r.find("li.loading");b.animate({opacity:0,height:0},500,function(){if("nav"===a){var c,d=b.index(),e=0;b.remove();for(var f=0;d>f;f++)c=r.find("li").eq(f),e+=c.outerHeight();r.animate({scrollTop:e},700,function(){r.removeClass("loading"),XT.vars.animating=!1;var a=c.next();a&&a.find("a").trigger("click")})}else b.remove(),r.removeClass("loading"),XT.vars.animating=!1}),XT.vars.animating=!0;var c=t.find("article.loading");c.animate({opacity:0,height:0},500,function(){if("content"===a){var b=c.position().top;s.animate({scrollTop:b},700,function(){c.remove(),t.removeClass("loading"),XT.vars.animating=!1})}else c.remove(),t.removeClass("loading"),XT.vars.animating=!1}),setTimeout(function(){w=!1},1e3)}function k(b,d){r=g(),t=h();var f=r.closest(".content").index(),k=r.closest(".content").data("action"),m=r.closest(".content").data("settings");return w||XT.vars.animating&&"nav"===b||x[f]&&"prev"===d||y[f]&&"next"===d?!1:(z++,i(b,d),void $.ajax({url:xt_vars.ajaxurl,type:"post",dataType:"json",data:{action:k,cpage:z,direction:d,settings:m,template:"endless-posts"},success:function(g){setTimeout(function(){"prev"===d&&""!==g.prev_content_items&&""!==g.prev_tab_items.length?(t.append(g.prev_content_items),r.append(g.prev_tab_items)):"next"===d&&""!==g.next_content_items&&""!==g.next_tab_items.length?(t.prepend(g.next_content_items),r.prepend(g.next_tab_items)):l(f,d),j(b,d),a(),c(),e(),XT.initToggle(),XT.initComments()},700)},error:function(){j(b,d),l(f,d)}}))}function l(a,b){"prev"===b?x[a]=!0:y[a]=!0}if(0===$(".tpl-endless-articles").length)return!1;var m=$("#endless-articles-wrapper").data("updatestate"),n=location.hash,o=n?!0:!1,p=$(".tpl-endless-articles .sidebar"),q=p.find(".tabs-content .content .news-list"),r=g(),s=(p.find(".tabs-content .tabs"),$(".tpl-endless-articles #inner_wrapper")),t=h(),u=($(window).width(),$(window).height()-$("header").height()),v=84,w=($("article"),!1),x=[],y=[],z=1;o&&(XT.vars.animating=!0),$("html,body").css("overflow","hidden").scrollTop(0);var A=s.niceScroll();setTimeout(function(){q.each(function(){var a=$(this).niceScroll();$(a.rail[0]).detach().appendTo(p).addClass("sidebar-scroll")})},20),setTimeout(function(){$(A.rail[0]).addClass("main-scroll"),$(window).resize()},150),a(),b(),c(),d(),e(),f()},XT.initComments=function(){$("form.comment-form").off("submit"),$("form.comment-form").on("submit",function(a){a.preventDefault();{var b=".top-menu.sticky.fixed",c=".main-menu.sticky.fixed",d=$(this),e=d.closest(".comments-area"),f=d.closest("article"),g=e.data("thankyou"),h=d.attr("action"),i=d.serialize(),j=d.find("#comment_post_ID").val(),k=f.find("#comments_"+j+" .commentlist"),l=$('<span class="loading fa fa-refresh fa-spin"></span>');d.find("#cancel-comment-reply-link"),$(".tpl-endless-articles").length>0}d.find(".alert-box").length>0&&d.find(".alert-box").remove(),d.find(".form-submit").append(l),$.ajax({url:h,data:i,type:"post",dataType:"json",success:function(a){var e=a.id;if(1===a.status){k.html(a.list);var h=f.find("#comment-"+e).offset().top;$(b).length>0&&(h-=$(b).outerHeight(!0)),$(c).length>0&&(h-=$(c).outerHeight(!0));var i="html, body";$(i).animate({scrollTop:h},600),d.find(".form-submit").prepend('<div class="alert-box success">'+g+"</div>")}else 0===a.status&&d.find(".form-submit").prepend('<div class="alert-box success">'+g+"</div>");d.find("#comment").val(""),d.find(".loading").remove()},error:function(a){var b=$(a.responseText);b.each(function(a,b){if("[object HTMLParagraphElement]"===b.toString()){var c=$(b).html();d.find(".form-submit").prepend('<div class="alert-box warning">'+c+"</div>")}}),d.find(".loading").remove()}})}),$(".comment-reply-link").off("click"),$(".comment-reply-link").on("click",function(){}),$(".load-more-comments").off("click"),$(".load-more-comments").on("click",function(a){a.preventDefault();var b=".top-menu.sticky.fixed",c=".main-menu.sticky.fixed",d=$(this),e=d.data("postid"),f=d.data("page"),g=$("#comments_"+e+" .commentlist");d.find("span").removeClass("fa-caret-down"),d.find("span").addClass("fa-refresh fa-spin"),$.ajax({url:xt_vars.ajaxurl,data:{action:"xt_ajax_comments",post_id:e,page:f},type:"post",success:function(a){if(a){var e=g.find(" > li.comment").last();if(g.append(a),$(e).length>0){var h=$(e).offset().top;$(b).length>0&&(h-=$(b).outerHeight(!0)),$(c).length>0&&(h-=$(c).outerHeight(!0)),$("html, body").animate({scrollTop:h},600)}f+=1,d.data("page",f),d.find("span").removeClass("fa-refresh fa-spin"),d.find("span").addClass("fa-caret-down")}else d.find("span").removeClass("fa-refresh fa-spin"),d.find("span").addClass("fa-caret-down"),d.fadeOut()}})})};var disqus_shortname="xt-good-news",disqus_identifier,disqus_url;XT.loadDisqus=function(a,b){var c=$(".tpl-endless-articles #inner_wrapper"),d=$(b).closest("article"),e=d.data("postid")+" "+d.data("guid"),f=d.data("permalink"),g=$(b).find(".discus-wrap"),h='<div class="wait mini">';if(h+='<div class="double-bounce1"></div>',h+='<div class="double-bounce2"></div>',h+="</div>",$(g).html(h),!window.DISQUS){$(g).html('<div id="disqus_thread"></div>'),disqus_identifier=e,disqus_url=f;var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src="http://"+disqus_shortname+".disqus.com/embed.js",jQuery("head").append(i)}setTimeout(function(){DISQUS.reset({reload:!0,config:function(){this.page.identifier=e,this.page.url=f}}),$(a).fadeOut(function(){$(g).html($("#disqus_thread"));var a=$(b).closest("article").position().top+$(b).closest("article").outerHeight()-$(b).outerHeight()-$("header").outerHeight()+75;c.animate({scrollTop:a},500,function(){c.find(".article-comments.fade.in").not(b).each(function(){$(this).hide().removeClass("in"),$(this).closest("article").find(".comments-toggle").show(),a=$(b).closest("article").position().top+$(b).closest("article").outerHeight()-$(b).outerHeight()-$("header").outerHeight()+75,c.scrollTop(a)})})})},500)},XT.showComments=function(a,b){var c=$(".tpl-endless-articles #inner_wrapper");$(a).fadeOut(function(){$(this).remove();var a=$(b).closest("article").position().top+$(b).closest("article").outerHeight()-$(b).outerHeight()-$("header").outerHeight()+75;c.animate({scrollTop:a},500)})},XT.initStollJs=function(){return XT.isTouch()?!1:void("undefined"!=typeof stroll&&(stroll.bind("ul.stroll",{live:!0}),$("ul.stroll li.future").on("mouseenter",function(){$(this).removeClass("future")})))},XT.initChosenSelect=function(){$("select").chosen({disable_search_threshold:10})},XT.initLabelToPlaceholder=function(){var a=".nm_mc_form,.comment-form";$(a).find(":input[type='text'],textarea").each(function(a,b){var c=$(b).attr("id"),d=null;c&&1===(d=$(b).parents("form").find("label[for="+c+"]")).length&&($(b).attr("placeholder",$(d).html()),$(d).remove())})},XT.initBackToTop=function(){$("#back-to-top").on("click",function(a){a.preventDefault(),$("body,html").animate({scrollTop:0},{duration:1200,easing:"easeInOutCirc"})})},XT.initScrollToSection=function(){function a(a){var b=".top-menu.sticky",c=".main-menu.sticky",d=$(window).width();if(XT.vars.animating)return!1;if($(a).length>0){XT.vars.animating=!0;var e=$(a).offset().top;d>XT.vars.breakpoints.tablet&&($(b).length>0&&(e-=$(b).find(".top-bar").data("sticky_height")),$(c).length>0&&(e-=$(c).find(".top-bar").data("sticky_height"))),$("body,html").animate({scrollTop:e},800,function(){var e=$(a).offset().top;d>XT.vars.breakpoints.tablet&&($(b).length>0&&(e-=$(b).find(".top-bar").data("sticky_height")),$(c).length>0&&(e-=$(c).find(".top-bar").data("sticky_height"))),$("body,html").animate({scrollTop:e},800,function(){XT.vars.animating=!1})})}}$("a[href*=#]").on("click",function(b){var c=$(this).attr("href");if("#"===c.charAt(0)){if(XT.vars.animating)return!1;c=c.replace("#","#scrollto_"),$(c).length>0&&(b.preventDefault(),a(c))}else if(c===location.href){var d=location.href;c=d.split("#"),c.length>1&&(c="#scrollto_"+c[1],a(c))}}),$(window).on("load",function(){var b=location.href,c=b.split("#");c.length>1&&(c="#scrollto_"+c[1],a(c))})},XT.initTwitter=function(){$(".xt_widget_twitter").each(function(){var a=$(this).find(".query"),b=a.data("username"),c=a.data("count"),d=a.data("showdate"),e=a.data("showavatar"),f="{join}{text}";if(""===b)return!1;1===d&&(f="{time}"+f),1===e&&(f="{avatar}"+f);var g={modpath:xt_vars.theme_url+"/assets/vendors/twitter/",username:b,avatar_size:32,page:1,count:c,fetch:c,loading_text:a.data("loading"),template:f},h=a,i=$(this).find(".next"),j=$(this).find(".prev"),k=function(a,b){return b?$(a).removeClass("disabled"):$(a).addClass("disabled")},l=function(a){return function(){g.page=g.page+a,k(this,!1),h.tweet(g)}};i.on("checkstate",function(){k(this,h.find("li").length===g.count)}).click(l(1)),j.on("checkstate",function(){k(this,g.page>1)}).click(l(-1)),h.tweet(g).on("loaded",function(){i.add(j).trigger("checkstate")})})},XT.initStickySidebar=function(){$(window).load(function(){var a={},b=".top-menu.sticky",c=".main-menu.sticky";$(".has-sticky-sidebar").each(function(){var d=$(this);d.closest(".vc_row").length>0?a.containerSelector=d.closest(".vc_row"):d.closest(".row").length>0&&(a.containerSelector=d.closest(".row"));var e=0;d.data("margin_top")&&(e=d.data("margin_top"));var f=0;d.data("margin_bottom")&&(f=d.data("margin_bottom")),$(b).length>0&&(e+=$(b).find(".top-bar").data("sticky_height")),$(c).length>0&&(e+=$(c).find(".top-bar").data("sticky_height")),a.additionalMarginTop=e,a.additionalMarginBottom=f,$(this).theiaStickySidebar(a)})})},XT.initPostNav=function(){return 0===$(".post-nav").length?!1:void($(".post-nav").hasClass("show-on-scroll")?$(".single .article-end").waypoint(function(a){"down"===a?$(".post-nav").addClass("active"):"up"===a&&$(".post-nav").removeClass("active")},{offset:"90%"}):$(".post-nav").addClass("active"))},XT.initContentHeight=function(){$(window).resize(function(){var a=$(window).height()-$("header").outerHeight()-$("footer").outerHeight();$("#inner_wrapper").css("min-height",a)}),$(window).resize()},XT.hideWidgetTitleIfEmpty=function(){$(".widgettitle").each(function(){var a=$(this).text();""===a&&$(this).hide()})},XT.initCustomJS=function(){xt_vars.custom_js.length>0&&eval(xt_vars.custom_js)},XT.updatePageInfo=function(a,b,c){Modernizr.history&&(a&&""!==a&&(document.title=a),window.history.pushState({html:c,pageTitle:document.title},"",b))},XT.isTouch=function(){return!$("html").hasClass("no-touch")
},XT.canDoAnimations=function(){return $("html").hasClass("cssanimations")},$(document).ready(function(){XT.init()})}(jQuery);